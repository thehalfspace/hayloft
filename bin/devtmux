#!/usr/bin/env bash

SESSION_NAME="$1"

if [ -z "$SESSION_NAME" ]; then
  echo "Usage: devtmux <session-name>"
  exit 1
fi

# If session already exists, attach to it
if tmux has-session -t "$SESSION_NAME" 2>/dev/null; then
  echo "ü™ö Session '$SESSION_NAME' already exists. Attaching..."
  tmux attach-session -t "$SESSION_NAME"
  exit 0
fi

# Start new session with one window named 'dev'
tmux new-session -d -s "$SESSION_NAME" -n dev

# Split window 'dev' vertically: left editing, right REPL
tmux split-window -h -t "$SESSION_NAME:dev"

# Resize left pane to 60%
tmux resize-pane -t "$SESSION_NAME:dev".0 -x 75

# Send commands to each pane
tmux send-keys -t "$SESSION_NAME:dev".0 '"Left pane: Editing ü™ö"' C-m
tmux send-keys -t "$SESSION_NAME:dev".1 '"Right pane: REPL üêç"' C-m

# Select editing pane and attach
tmux select-pane -t "$SESSION_NAME:dev".0
tmux attach-session -t "$SESSION_NAME"

